{% extends 'user/base_user.html' %}

{% load static %}

{% block title %}
Order Details
{% endblock title %}

{% block content %}
<style>
    .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        border-radius: 5px;
    }

    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    img {
        border-radius: 5px 5px 0 0;
    }

    .list-group-item,
    .btn-light {
        color: black;
        font-weight: bold;
    }

    .list-group-item:hover,
    .btn-light:hover {
        color: #ff2020;
    }

    .list-group-item.active {
        color: #000000;
        background-color: #ff2020;
    }

    /* Improved spacing and layout */
    .container {
        margin-top: 20px;
    }

    .product-card {
        margin-bottom: 20px;
    }

    .shipping-address {
        padding-left: 40px;
    }

    /* Additional styling for product card */
    .product-card .product-img {
        overflow: hidden;
        position: relative;
        padding: 0;
    }

    .product-card .product-img img {
        width: 100%;
        height: auto;
    }

    .product-card .card-body {
        border-left: none;
        border-right: none;
        text-align: center;
        padding: 15px;
    }

    .product-card h6 {
        font-size: 18px;
    }

    .product-card .fixed-price {
        font-size: 16px;
        font-weight: bold;
    }

    .product-card .fixed-color,
    .product-card .fixed-size {
        font-size: 14px;
        font-weight: normal;
    }

    /* Shipping address style */
    .shipping-address ul {
        list-style: none;
        padding: 0;
    }

    .shipping-address li {
        margin-bottom: 5px;
    }

    .shipping-address strong {
        font-weight: bold;
    }
</style>
<div style="margin-top: 150px;">
    <div class="container">
        <div class="row">
            <section class="col-md-6">
                <div class="product-card card border-0 mb-4">
                    <div class="product-img card-header position-relative overflow-hidden bg-transparent border p-0">
                        {% for img in order_item.product.images.all %}
                        {% if forloop.first %}
                        <img class="img-fluid card-image" src="{{img.image.url }}" alt="">
                        {% endif %}
                        {% endfor %}
                    </div>
                    <div class="card-body">
                        <h6 class="text-truncate mb-2">Product: {{ order_item.product.product }}</h6>
                        <h6 class="text-truncate mb-2">Size: {{ order_item.product.size }}</h6>
                        <h6 class="text-truncate mb-2">Category: {{ order_item.product.product.category }}</h6>
                        <h6 class="text-truncate mb-2">Color: {{ order_item.product.color }}</h6>
                        <h6 class="text-truncate mb-2">Price: {{ order_item.order.total_price_tax }}</h6>
                        <h6 class="text-truncate mb-2">Payment Method: {{ order_item.order.payment_method }}</h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="text-truncate mb-2">Order Status: {{ order_item.order_status }}</h6>
                            {% if order_item.order_status == 'Order Placed' or order_item.order_status == 'Shipped' %}
                            <form method="post" action="{% url 'cancel_order' order_item.order.id order_item.product.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-sm btn-dark btn-cancel">CANCEL</button>
                            </form>
                            {% endif %}
                        </div>
                        <div class="d-flex flex-column align-items-center mb-2">
                        </div>
                    </div>
                </div>
            </section>
            <div class="col-md-3 mt-2 mb-4 ml-5">
                <div class="card shipping-address ml-auto" style="width: 350px;">
                    <h4 class="mb-3">Shipping Address:</h4>
                    <ul>
                        <li><strong>Name:</strong> {{ order.address.user }}</li>
                        <li><strong>Phone:</strong> {{ order.address.user.phone_number }}</li>
                        <li><strong>House:</strong> {{ order.address.name }}</li>
                        <li><strong>Street:</strong> {{ order.address.street }}</li>
                        <li><strong>City:</strong> {{ order.address.city }}</li>
                        <li><strong>State:</strong> {{ order.address.state }}</li>
                        <li><strong>Country:</strong> {{ order.address.country }}</li>
                        <li><strong>Pin code:</strong> {{ order.address.pin_code }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}